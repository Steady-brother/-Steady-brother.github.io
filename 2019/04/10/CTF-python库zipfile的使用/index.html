<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="CTF–python库zipfile的使用zipfile库简介Python zipfile模块用来做zip格式编码的压缩和解压缩的，要进行相关操作，首先需要实例化一个 ZipFile 对象。ZipFile 接受一个字符串格式压缩包名称作为它的必选参数，第二个参数为可选参数，表示打开模式，类似于文件操作，有r&#x2F;w&#x2F;a三种模式，分别代表读、写、添加，默认为r，即读模式。 zipfile里有两个非常重要">
<meta property="og:type" content="article">
<meta property="og:title" content="CTF-python库zipfile的使用">
<meta property="og:url" content="http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/index.html">
<meta property="og:site_name" content="steady&#39;s blog">
<meta property="og:description" content="CTF–python库zipfile的使用zipfile库简介Python zipfile模块用来做zip格式编码的压缩和解压缩的，要进行相关操作，首先需要实例化一个 ZipFile 对象。ZipFile 接受一个字符串格式压缩包名称作为它的必选参数，第二个参数为可选参数，表示打开模式，类似于文件操作，有r&#x2F;w&#x2F;a三种模式，分别代表读、写、添加，默认为r，即读模式。 zipfile里有两个非常重要">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2019-04-10T05:12:20.000Z">
<meta property="article:modified_time" content="2020-11-15T10:01:05.484Z">
<meta property="article:author" content="steady">
<meta property="article:tag" content="CTF-python">
<meta name="twitter:card" content="summary">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>CTF-python库zipfile的使用</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="steady's blog" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2019/04/17/CTF-python%E5%BA%93PIL%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2019/04/09/CTF-%E6%B5%81%E9%87%8F%E5%88%86%E6%9E%90%E9%A2%982/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&text=CTF-python库zipfile的使用"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&is_video=false&description=CTF-python库zipfile的使用"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CTF-python库zipfile的使用&body=Check out this article: http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&name=CTF-python库zipfile的使用&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&t=CTF-python库zipfile的使用"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CTF%E2%80%93python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">CTF–python库zipfile的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#zipfile%E5%BA%93"><span class="toc-number">1.1.</span> <span class="toc-text">zipfile库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipFile-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">ZipFile 对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipFile-%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">ZipFile 成员函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#z-Zipinfo"><span class="toc-number">1.1.2.2.1.</span> <span class="toc-text">z.Zipinfo()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-namelist"><span class="toc-number">1.1.2.2.2.</span> <span class="toc-text">z.namelist()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-read"><span class="toc-number">1.1.2.2.3.</span> <span class="toc-text">z.read()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-write"><span class="toc-number">1.1.2.2.4.</span> <span class="toc-text">z.write()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-extract"><span class="toc-number">1.1.2.2.5.</span> <span class="toc-text">z.extract()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-extractall"><span class="toc-number">1.1.2.2.6.</span> <span class="toc-text">z.extractall()</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unrar%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">unrar库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-1"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rar%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.1.1.1.</span> <span class="toc-text">rar对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rarfile%E6%88%90%E5%91%98%E5%AF%B9%E8%B1%A1%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.1.1.2.</span> <span class="toc-text">rarfile成员对象函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#rar-namelist"><span class="toc-number">1.2.1.1.2.1.</span> <span class="toc-text">rar.namelist()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#rar-printdir"><span class="toc-number">1.2.1.1.2.2.</span> <span class="toc-text">rar.printdir()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#rar-extractall"><span class="toc-number">1.2.1.1.2.3.</span> <span class="toc-text">rar.extractall()</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CTF%E9%A2%98%E7%9B%AE%E5%88%A9%E7%94%A8"><span class="toc-number">1.3.</span> <span class="toc-text">CTF题目利用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CMP03-Multiple"><span class="toc-number">1.3.1.</span> <span class="toc-text">CMP03 Multiple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qctl-zip"><span class="toc-number">1.3.2.</span> <span class="toc-text">qctl.zip</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        CTF-python库zipfile的使用
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">steady</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2019-04-10T05:12:20.000Z" itemprop="datePublished">2019-04-10</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/CTF-python/">CTF-python</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/CTF-python/" rel="tag">CTF-python</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h1 id="CTF–python库zipfile的使用"><a href="#CTF–python库zipfile的使用" class="headerlink" title="CTF–python库zipfile的使用"></a>CTF–python库zipfile的使用</h1><h2 id="zipfile库"><a href="#zipfile库" class="headerlink" title="zipfile库"></a>zipfile库</h2><h3 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h3><p>Python zipfile模块用来做zip格式编码的压缩和解压缩的，要进行相关操作，首先需要实例化一个 ZipFile 对象。ZipFile 接受一个字符串格式压缩包名称作为它的必选参数，第二个参数为可选参数，表示打开模式，类似于文件操作，有r/w/a三种模式，分别代表读、写、添加，默认为r，即读模式。</p>
<p>zipfile里有两个非常重要的class, 分别是ZipFile和ZipInfo, 在绝大多数的情况下，我们只需要使用这两个class就可以了。ZipFile是主要的类，用来创建和读取zip文件而ZipInfo是存储的zip文件的每个文件的信息的。</p>
<h3 id="使用方式"><a href="#使用方式" class="headerlink" title="使用方式"></a>使用方式</h3><h4 id="ZipFile-对象"><a href="#ZipFile-对象" class="headerlink" title="ZipFile 对象"></a>ZipFile 对象</h4><p>定义</p>
<figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">zipfile.ZipFile(file,mode,compress_type,allowZip64) <span class="meta">#创建一个ZipFile对象  </span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">file: zip文件名</span><br><span class="line">mode: <span class="string">&#x27;r&#x27;</span>读已存在的zip文件,<span class="string">&#x27;w&#x27;</span>新建或覆盖已存在的zip文件,<span class="string">&#x27;a&#x27;</span>附加到现存的 zip文档</span><br><span class="line">compress_type: zipfile.ZIP_STORED 默认不压缩, zipfile.ZIP_DEFLATED 压缩</span><br><span class="line">allowZip64 : 默认 False, zip超过<span class="number">2</span>G设置为True</span><br></pre></td></tr></table></figure>

<p>以只读的方式打开一个zip文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z=zipfile.ZipFile(<span class="string">&quot;flag.zip&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">print(z)</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;zipfile.ZipFile filename=<span class="string">&#x27;flag.zip&#x27;</span> mode=<span class="string">&#x27;r&#x27;</span>&gt;</span><br></pre></td></tr></table></figure>

<h4 id="ZipFile-成员函数"><a href="#ZipFile-成员函数" class="headerlink" title="ZipFile 成员函数"></a>ZipFile 成员函数</h4><ul>
<li>ZipFile.getinfo(name) #获取zip文档内指定文件信息, 返回zipfile.ZipInfo对象</li>
<li>ZipFile.infolist() #获取zip文档内所有文件信息, 返回zipfile.ZipInfo列表</li>
<li>ZipFile.namelist() #获取zip文档内所有文件的名称列表</li>
<li>ZipFile.extract(member,path,pwd) #把zip文档内指定文件解压到指定目录<ul>
<li>member : 要解压的文件名称或ZipInfo对象</li>
<li>path : 指定解压目录(默认当前目录)</li>
<li>pwd : 解压密码</li>
</ul>
</li>
<li>ZipFile.extractall(path,members,pwd) #解压zip文档到指定目录<ul>
<li>path : 解压目的目录, 默认当前目录</li>
<li>members : 设置的文件名列表, 默认全部</li>
<li>pwd : 解压密码</li>
</ul>
</li>
<li>ZipFile.printdir() #打印zip文档信息</li>
<li>ZipFile.setpassword(pwd) #设置zip文档密码<ul>
<li>pwd : 解压密码</li>
</ul>
</li>
<li>ZipFile.read(name,pwd) #获取zip文档内指定文件的二进制<ul>
<li>name : zip文档内指定文件</li>
<li>pwd : 解压密码</li>
</ul>
</li>
<li>ZipFile.write(filename,arcname,compress_type) #添加指定文件到zip文档中<ul>
<li>filename : 文件路径</li>
<li>arcname : 保存的名称</li>
<li>compress_type : zipfile.ZIP_STORED 默认不压缩, zipfile.ZIP_DEFLATED 压缩</li>
</ul>
</li>
<li>ZipFile.writestr(zinfo_or_arcname,bytes) #直接写二进制到压缩文档</li>
</ul>
<h5 id="z-Zipinfo"><a href="#z-Zipinfo" class="headerlink" title="z.Zipinfo()"></a>z.Zipinfo()</h5><p>z.infolist(), 它返回的就是压缩包内所有文件的信息，就是一个ZipInfo的列表。以下是一些压缩包常用的属性。比较常用的是 filename, file_size, header_offset, 分别为文件名，文件大小，文件数据在压缩包中的偏移，在打CTF的时候我们也常使用CRC，进行CRC爆破。</p>
<ul>
<li>ZipInfo.filename #文件名称</li>
<li>ZipInfo.date_time #最后修改时间, 返回(年,月,日,时,分,秒)的元组</li>
<li>ZipInfo.compress_type #压缩类型</li>
<li>ZipInfo.comment #文档说明</li>
<li>ZipInfo.extr #扩展项数据</li>
<li>ZipInfo.create_system #创建该文档的系统</li>
<li>ZipInfo.create_version #创建该文档的PKZIP版本</li>
<li>ZipInfo.extract_version #解压该文档所需的PKZIP版本</li>
<li>ZipInfo.reserved #预留字段</li>
<li>ZipInfo.flag_bits #zip标志位</li>
<li>ZipInfo.volume #文件头的卷标</li>
<li>ZipInfo.internal_attr #内部属性</li>
<li>ZipInfo.external_attr #外部属性</li>
<li>ZipInfo.header_offset #文件头偏移位</li>
<li>ZipInfo.CRC #未压缩文件的CRC-32</li>
<li>ZipInfo.compress_size #压缩后大小</li>
<li>ZipInfo.file_size #未压缩大小</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z=zipfile.ZipFile(<span class="string">&quot;flag.zip&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">print(z.infolist())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> z.infolist():</span><br><span class="line">    print(i.filename,i.CRC)</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[&lt;ZipInfo filename=<span class="string">&#x27;flag.png&#x27;</span> compress_type=deflate external_attr=<span class="number">0x20</span> file_size=<span class="number">13642</span> compress_size=<span class="number">1592</span>&gt;]</span><br><span class="line">flag.png <span class="number">1926850634</span></span><br></pre></td></tr></table></figure>

<h5 id="z-namelist"><a href="#z-namelist" class="headerlink" title="z.namelist()"></a>z.namelist()</h5><p>z.namelist() 会返回压缩包内所有文件名的列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z=zipfile.ZipFile(<span class="string">&quot;flag.zip&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">print(z.namelist())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> z.namelist():</span><br><span class="line">    print(i)</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;flag.png&#x27;</span>]</span><br><span class="line">flag.png</span><br></pre></td></tr></table></figure>

<h5 id="z-read"><a href="#z-read" class="headerlink" title="z.read()"></a>z.read()</h5><p>获取zip文档内指定文件的二进制数据。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z=zipfile.ZipFile(<span class="string">&quot;flag.zip&quot;</span>,<span class="string">&quot;r&quot;</span>)</span><br><span class="line">print(z.infolist())</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> z.infolist():</span><br><span class="line">    date=z.read(i.filename)</span><br><span class="line">    print(date)</span><br></pre></td></tr></table></figure>

<p>输出文件的二进制形式，可以通过open函数对文件进行操作，将二进制形式写入文件中。</p>
<h5 id="z-write"><a href="#z-write" class="headerlink" title="z.write()"></a>z.write()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZipFile.write(filename[, arcname[, compress_type]])</span><br></pre></td></tr></table></figure>

<p>将指定文件添加到zip文档中。filename为文件路径，arcname为添加到zip文档之后保存的名称, 参数compress_type表示压缩方法，它的值可以是zipfile. ZIP_STORED 或zipfile. ZIP_DEFLATED。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z=zipfile.ZipFile(<span class="string">r&quot;steady.zip&quot;</span>,<span class="string">&quot;w&quot;</span>)</span><br><span class="line">z.write(<span class="string">&#x27;./flag.png&#x27;</span>,<span class="string">&#x27;steady.png&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>使用之后会在当前目录生成一个steady.zip的压缩包，压缩包的内容为steady.png。</p>
<h5 id="z-extract"><a href="#z-extract" class="headerlink" title="z.extract()"></a>z.extract()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZipFile.extract(member[, path[, pwd]])</span><br></pre></td></tr></table></figure>

<p>将zip文档内的指定文件解压到当前目录。参数member指定要解压的文件名称或对应的ZipInfo对象；参数path指定了解析文件保存的文件夹；参数pwd为解压密码。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile</span><br><span class="line">z=zipfile.ZipFile(<span class="string">&quot;steady.zip&quot;</span>)</span><br><span class="line">z.extract(z.namelist()[<span class="number">0</span>],<span class="string">&#x27;./gif/&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>注意extract的使用对象是zipfile对象，它提取的文件名字是压缩包内的名字而不是压缩包的名字。</p>
<h5 id="z-extractall"><a href="#z-extractall" class="headerlink" title="z.extractall()"></a>z.extractall()</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ZipFile.extractall([path[, members[, pwd]]])</span><br></pre></td></tr></table></figure>

<p>解压zip文档中的所有文件到当前目录。参数members的默认值为zip文档内的所有文件名称列表，也可以自己设置，选择要解压的文件名称。</p>
<h2 id="unrar库"><a href="#unrar库" class="headerlink" title="unrar库"></a>unrar库</h2><h3 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h3><p>unrar第三方python库是解压rar压缩文件的扩展包，可实现对rar压缩文件的读取、解压等处理。也可以使用unrar这个模块来进行编写rar压缩文件暴力破解。</p>
<h4 id="使用方式-1"><a href="#使用方式-1" class="headerlink" title="使用方式"></a>使用方式</h4><h5 id="rar对象"><a href="#rar对象" class="headerlink" title="rar对象"></a>rar对象</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unrar <span class="keyword">import</span> rarfile  </span><br><span class="line">rar = rarfile.RarFile(<span class="string">&#x27;flag.rar&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">print(rar)</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;unrar.rarfile.RarFile object at <span class="number">0x000002B0FC347880</span>&gt;</span><br></pre></td></tr></table></figure>

<h5 id="rarfile成员对象函数"><a href="#rarfile成员对象函数" class="headerlink" title="rarfile成员对象函数"></a>rarfile成员对象函数</h5><h6 id="rar-namelist"><a href="#rar-namelist" class="headerlink" title="rar.namelist()"></a>rar.namelist()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unrar <span class="keyword">import</span> rarfile  </span><br><span class="line">rar = rarfile.RarFile(<span class="string">&#x27;flag.rar&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">print(rar.namelist())</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="string">&#x27;flag.png&#x27;</span>]</span><br></pre></td></tr></table></figure>

<h6 id="rar-printdir"><a href="#rar-printdir" class="headerlink" title="rar.printdir()"></a>rar.printdir()</h6><p>打印rar压缩文件中的文件列表。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> unrar <span class="keyword">import</span> rarfile  </span><br><span class="line">rar = rarfile.RarFile(<span class="string">&#x27;flag.rar&#x27;</span>,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">rar.printdir()</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">File Name                                             Modified             Size</span><br><span class="line">flag.png                                       <span class="number">2020</span><span class="number">-11</span><span class="number">-01</span> <span class="number">10</span>:<span class="number">11</span>:<span class="number">02</span>        <span class="number">13642</span></span><br></pre></td></tr></table></figure>

<h6 id="rar-extractall"><a href="#rar-extractall" class="headerlink" title="rar.extractall()"></a>rar.extractall()</h6><p>解压rar压缩文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rf.extract(文件名字, 解压文件存放的路径) </span><br></pre></td></tr></table></figure>

<h2 id="CTF题目利用"><a href="#CTF题目利用" class="headerlink" title="CTF题目利用"></a>CTF题目利用</h2><h3 id="CMP03-Multiple"><a href="#CMP03-Multiple" class="headerlink" title="CMP03 Multiple"></a>CMP03 Multiple</h3><p>文件名称就是压缩包的密码。使用python批量解压。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">from</span> unrar <span class="keyword">import</span> rarfile</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unzip</span>(<span class="params">zipname</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        passwd = zipname[<span class="number">0</span>:<span class="number">6</span>]</span><br><span class="line">        zf = rarfile.RarFile(<span class="string">&#x27;C:/Users/12521/gif/&#x27;</span>+zipname,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">        zf.extractall(<span class="string">&#x27;./gif/&#x27;</span>,pwd=passwd)</span><br><span class="line"><span class="comment">#        zf.close()</span></span><br><span class="line">        os.remove(zipname)</span><br><span class="line">        zipname = zf.namelist()[<span class="number">0</span>].replace(<span class="string">&#x27;\\&#x27;</span>,<span class="string">&#x27;/&#x27;</span>)</span><br><span class="line">        print(zipname)</span><br><span class="line">unzip(<span class="string">&quot;flag.rar&quot;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="qctl-zip"><a href="#qctl-zip" class="headerlink" title="qctl.zip"></a>qctl.zip</h3><p>同理</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> zipfile,os</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">unzip</span>(<span class="params">zipname</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        passwd = zipname.split(<span class="string">&#x27;.&#x27;</span>)[<span class="number">0</span>]</span><br><span class="line">        zf = zipfile.ZipFile(zipname,<span class="string">&#x27;r&#x27;</span>)</span><br><span class="line">        zf.extractall(pwd=passwd.encode())</span><br><span class="line">        zf.close()</span><br><span class="line">        os.remove(zipname)</span><br><span class="line">        zipname = zf.namelist()[<span class="number">0</span>]</span><br><span class="line">unzip(<span class="string">&quot;qctl.zip&quot;</span>)</span><br></pre></td></tr></table></figure>


  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>加载评论需要在浏览器启用 JavaScript 脚本支持。</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#CTF%E2%80%93python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">CTF–python库zipfile的使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#zipfile%E5%BA%93"><span class="toc-number">1.1.</span> <span class="toc-text">zipfile库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F"><span class="toc-number">1.1.2.</span> <span class="toc-text">使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipFile-%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.1.2.1.</span> <span class="toc-text">ZipFile 对象</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ZipFile-%E6%88%90%E5%91%98%E5%87%BD%E6%95%B0"><span class="toc-number">1.1.2.2.</span> <span class="toc-text">ZipFile 成员函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#z-Zipinfo"><span class="toc-number">1.1.2.2.1.</span> <span class="toc-text">z.Zipinfo()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-namelist"><span class="toc-number">1.1.2.2.2.</span> <span class="toc-text">z.namelist()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-read"><span class="toc-number">1.1.2.2.3.</span> <span class="toc-text">z.read()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-write"><span class="toc-number">1.1.2.2.4.</span> <span class="toc-text">z.write()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-extract"><span class="toc-number">1.1.2.2.5.</span> <span class="toc-text">z.extract()</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#z-extractall"><span class="toc-number">1.1.2.2.6.</span> <span class="toc-text">z.extractall()</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#unrar%E5%BA%93"><span class="toc-number">1.2.</span> <span class="toc-text">unrar库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%80%E4%BB%8B-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">简介</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E5%BC%8F-1"><span class="toc-number">1.2.1.1.</span> <span class="toc-text">使用方式</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#rar%E5%AF%B9%E8%B1%A1"><span class="toc-number">1.2.1.1.1.</span> <span class="toc-text">rar对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#rarfile%E6%88%90%E5%91%98%E5%AF%B9%E8%B1%A1%E5%87%BD%E6%95%B0"><span class="toc-number">1.2.1.1.2.</span> <span class="toc-text">rarfile成员对象函数</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#rar-namelist"><span class="toc-number">1.2.1.1.2.1.</span> <span class="toc-text">rar.namelist()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#rar-printdir"><span class="toc-number">1.2.1.1.2.2.</span> <span class="toc-text">rar.printdir()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#rar-extractall"><span class="toc-number">1.2.1.1.2.3.</span> <span class="toc-text">rar.extractall()</span></a></li></ol></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#CTF%E9%A2%98%E7%9B%AE%E5%88%A9%E7%94%A8"><span class="toc-number">1.3.</span> <span class="toc-text">CTF题目利用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CMP03-Multiple"><span class="toc-number">1.3.1.</span> <span class="toc-text">CMP03 Multiple</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#qctl-zip"><span class="toc-number">1.3.2.</span> <span class="toc-text">qctl.zip</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&text=CTF-python库zipfile的使用"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&is_video=false&description=CTF-python库zipfile的使用"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=CTF-python库zipfile的使用&body=Check out this article: http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&title=CTF-python库zipfile的使用"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&name=CTF-python库zipfile的使用&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://s1eady.top/2019/04/10/CTF-python%E5%BA%93zipfile%E7%9A%84%E4%BD%BF%E7%94%A8/&t=CTF-python库zipfile的使用"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2018.12.8-2020
    steady
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/tags/">标签</a></li>
         
          <li><a href="/categories/">分类</a></li>
         
          <li><a href="/search/">搜索</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'cactus-1';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
