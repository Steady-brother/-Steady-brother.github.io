<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="Python爬虫Requests库Get请求12345678910111213141516171819202122import requests# 带参数的GET请求,timeout请求超时时间headers &#x3D; &amp;#123;     &amp;#x27;User-Agent&amp;#x27;: &amp;#x27;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKi">
<meta property="og:type" content="article">
<meta property="og:title" content="Python学习--Python爬虫基础">
<meta property="og:url" content="http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Python爬虫Requests库Get请求12345678910111213141516171819202122import requests# 带参数的GET请求,timeout请求超时时间headers &#x3D; &amp;#123;     &amp;#x27;User-Agent&amp;#x27;: &amp;#x27;Mozilla&#x2F;5.0 (Windows NT 10.0; Win64; x64) AppleWebKi">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://steady-1302023625.cos.ap-beijing.myqcloud.com/makedown/image-20200928201555572.png">
<meta property="og:image" content="https://steady-1302023625.cos.ap-beijing.myqcloud.com/makedown/image-20200928202240146.png">
<meta property="article:published_time" content="2018-12-06T23:20:30.000Z">
<meta property="article:modified_time" content="2020-11-12T02:10:11.487Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://steady-1302023625.cos.ap-beijing.myqcloud.com/makedown/image-20200928201555572.png">
    
    
      
        
          <link rel="shortcut icon" href="/images/favicon.ico">
        
      
      
        
          <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
        
      
      
        
          <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
        
      
    
    <!-- title -->
    <title>Python学习--Python爬虫基础</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.2.0"><link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
</head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/projects_url">项目</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2018/12/08/PHP%E6%9C%A8%E9%A9%AC/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2018/12/07/CTF-%E5%AF%86%E7%A0%81%E9%A2%98%E6%80%BB%E7%BB%93/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">上一篇</span>
      <span id="i-next" class="info" style="display:none;">下一篇</span>
      <span id="i-top" class="info" style="display:none;">返回顶部</span>
      <span id="i-share" class="info" style="display:none;">分享文章</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&text=Python学习--Python爬虫基础"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&is_video=false&description=Python学习--Python爬虫基础"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Python学习--Python爬虫基础&body=Check out this article: http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&name=Python学习--Python爬虫基础&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&t=Python学习--Python爬虫基础"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python%E7%88%AC%E8%99%AB"><span class="toc-number">1.</span> <span class="toc-text">Python爬虫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Requests%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">Requests库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Get%E8%AF%B7%E6%B1%82"><span class="toc-number">2.0.1.</span> <span class="toc-text">Get请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Post%E8%AF%B7%E6%B1%82"><span class="toc-number">2.0.2.</span> <span class="toc-text">Post请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%B4"><span class="toc-number">2.0.3.</span> <span class="toc-text">随机浏览器头</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Get%E8%AF%B7%E6%B1%82%E4%B8%8EPost%E8%AF%B7%E6%B1%82%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">2.0.4.</span> <span class="toc-text">Get请求与Post请求设置代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%8C%85"><span class="toc-number">2.0.5.</span> <span class="toc-text">处理请求包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B6%85%E6%97%B6"><span class="toc-number">2.0.6.</span> <span class="toc-text">超时</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie%E6%93%8D%E4%BD%9C"><span class="toc-number">2.0.7.</span> <span class="toc-text">cookie操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#requests%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1Response%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.0.8.</span> <span class="toc-text">requests请求返回对象Response的常用方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#requests%E7%9A%84content%E5%92%8Ctext%E6%96%B9%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.0.9.</span> <span class="toc-text">requests的content和text方法的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96"><span class="toc-number">3.</span> <span class="toc-text">数据提取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XPath"><span class="toc-number">3.1.</span> <span class="toc-text">XPath</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XPath%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.1.</span> <span class="toc-text">XPath语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XPATH%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.2.</span> <span class="toc-text">XPATH语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lxml%E5%BA%93"><span class="toc-number">3.1.3.</span> <span class="toc-text">lxml库</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BeautifulSoup4"><span class="toc-number">3.2.</span> <span class="toc-text">BeautifulSoup4</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAbs%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.2.1.</span> <span class="toc-text">创建bs对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tag"><span class="toc-number">3.2.2.</span> <span class="toc-text">Tag</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tag%E7%9A%84%E4%B8%A4%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">3.2.3.</span> <span class="toc-text">Tag的两个重要的属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NavigableString"><span class="toc-number">3.2.4.</span> <span class="toc-text">NavigableString</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%96%87%E6%A1%A3%E6%A0%91"><span class="toc-number">3.2.5.</span> <span class="toc-text">搜索文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#find%E5%92%8Cfind-all%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">find和find_all方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#select%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">select方法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E9%87%8F%E8%AF%8D"><span class="toc-number">4.1.</span> <span class="toc-text">数量词</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E5%AE%9A%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">4.2.</span> <span class="toc-text">预定字符集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84-amp-%E6%88%96-amp-%E8%BD%AC%E4%B9%89"><span class="toc-number">4.3.</span> <span class="toc-text">分组&amp;或&amp;转义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E5%8C%B9%E9%85%8D"><span class="toc-number">4.4.</span> <span class="toc-text">边界匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%BF%97%E4%BD%8D-flags"><span class="toc-number">4.5.</span> <span class="toc-text">标志位 flags</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#re%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.</span> <span class="toc-text">re模块中的函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#re-match%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.1.</span> <span class="toc-text">re.match函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-search%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.2.</span> <span class="toc-text">re.search函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-split%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.3.</span> <span class="toc-text">re.split函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-findall%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.4.</span> <span class="toc-text">re.findall函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-sub%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.5.</span> <span class="toc-text">re.sub函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%96%E5%9B%9E%E5%8C%B9%E9%85%8D%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">4.7.</span> <span class="toc-text">取回匹配的数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#r"><span class="toc-number">4.8.</span> <span class="toc-text">r</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F%E4%B8%8E%E9%9D%9E%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.9.</span> <span class="toc-text">贪婪模式与非贪婪模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%8B%AC%E5%8F%B7%E5%92%8C%E6%8B%AC%E5%8F%B7"><span class="toc-number">4.10.</span> <span class="toc-text">中括号和括号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">4.11.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">4.12.</span> <span class="toc-text">小案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csv%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">csv文件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96csv%E6%96%87%E4%BB%B6"><span class="toc-number">5.0.1.</span> <span class="toc-text">读取csv文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">5.0.2.</span> <span class="toc-text">获取数据</span></a></li></ol></li></ol></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Python学习--Python爬虫基础
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">John Doe</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2018-12-06T23:20:30.000Z" itemprop="datePublished">2018-12-07</time>
        
      
    </div>


      
    <div class="article-category">
        <i class="fas fa-archive"></i>
        <a class="category-link" href="/categories/Python%E5%AD%A6%E4%B9%A0/">Python学习</a>
    </div>


      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/Python/" rel="tag">Python</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h3 id="Python爬虫"><a href="#Python爬虫" class="headerlink" title="Python爬虫"></a>Python爬虫</h3><h3 id="Requests库"><a href="#Requests库" class="headerlink" title="Requests库"></a>Requests库</h3><h5 id="Get请求"><a href="#Get请求" class="headerlink" title="Get请求"></a>Get请求</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 带参数的GET请求,timeout请求超时时间</span></span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput=&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#params 接收一个字典或者字符串的查询参数，字典类型自动转换为url编码，不需要urlencode()</span></span><br><span class="line">params = &#123;<span class="string">&#x27;key1&#x27;</span>: <span class="string">&#x27;python&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>: <span class="string">&#x27;java&#x27;</span>&#125;</span><br><span class="line"><span class="comment">#发送get请求并带上参数以及请求头,设置超时时间。</span></span><br><span class="line">r = requests.get(url=<span class="string">&#x27;http://baidu.com&#x27;</span>,headers=headers,params=params, timeout=<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注意观察url地址，它已经将参数拼接起来</span></span><br><span class="line">print(<span class="string">&#x27;URL地址：&#x27;</span>, r.url)</span><br><span class="line"><span class="comment"># 响应状态码，成功返回200，失败40x或50x。</span></span><br><span class="line">print(<span class="string">&#x27;请求状态码：&#x27;</span>, r.status_code)</span><br><span class="line">print(<span class="string">&#x27;header信息:&#x27;</span>, r.headers)</span><br><span class="line">print(<span class="string">&#x27;cookie信息：&#x27;</span>, r.cookies)</span><br><span class="line"><span class="comment">#返回响应数据,html内容。</span></span><br><span class="line">print(<span class="string">&#x27;响应的数据：&#x27;</span>, r.text)</span><br><span class="line"><span class="comment"># 如响应是json数据 ，可以使用 r.json()自动转换为dict</span></span><br><span class="line">print(<span class="string">&#x27;响应json数据&#x27;</span>, r.json())</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">URL地址： http:&#x2F;&#x2F;httpbin.org&#x2F;get?key1&#x3D;python&amp;key2&#x3D;java</span><br><span class="line">请求状态码： 200</span><br><span class="line">header信息: &#123;&#39;Date&#39;: &#39;Mon, 28 Sep 2020 07:02:06 GMT&#39;, &#39;Content-Type&#39;: &#39;application&#x2F;json&#39;, &#39;Content-Length&#39;: &#39;373&#39;, &#39;Connection&#39;: &#39;keep-alive&#39;, &#39;Server&#39;: &#39;gunicorn&#x2F;19.9.0&#39;, &#39;Access-Control-Allow-Origin&#39;: &#39;*&#39;, &#39;Access-Control-Allow-Credentials&#39;: &#39;true&#39;&#125;</span><br><span class="line">cookie信息： &lt;RequestsCookieJar[]&gt;</span><br><span class="line">响应的数据： &#123;</span><br><span class="line">  &quot;args&quot;: &#123;</span><br><span class="line">    &quot;key1&quot;: &quot;python&quot;,</span><br><span class="line">    &quot;key2&quot;: &quot;java&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;headers&quot;: &#123;</span><br><span class="line">    &quot;Accept&quot;: &quot;*&#x2F;*&quot;,</span><br><span class="line">    &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class="line">    &quot;Host&quot;: &quot;httpbin.org&quot;,</span><br><span class="line">    &quot;User-Agent&quot;: &quot;python-requests&#x2F;2.23.0&quot;,</span><br><span class="line">    &quot;X-Amzn-Trace-Id&quot;: &quot;Root&#x3D;1-5f718a6e-659bccfc8f4f4d2473c9f92c&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;origin&quot;: &quot;111.14.212.75&quot;,</span><br><span class="line">  &quot;url&quot;: &quot;http:&#x2F;&#x2F;httpbin.org&#x2F;get?key1&#x3D;python&amp;key2&#x3D;java&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">响应json数据 &#123;&#39;args&#39;: &#123;&#39;key1&#39;: &#39;python&#39;, &#39;key2&#39;: &#39;java&#39;&#125;, &#39;headers&#39;: &#123;&#39;Accept&#39;: &#39;*&#x2F;*&#39;, &#39;Accept-Encoding&#39;: &#39;gzip, deflate&#39;, &#39;Host&#39;: &#39;httpbin.org&#39;, &#39;User-Agent&#39;: &#39;python-requests&#x2F;2.23.0&#39;, &#39;X-Amzn-Trace-Id&#39;: &#39;Root&#x3D;1-5f718a6e-659bccfc8f4f4d2473c9f92c&#39;&#125;, &#39;origin&#39;: &#39;111.14.212.75&#39;, &#39;url&#39;: &#39;http:&#x2F;&#x2F;httpbin.org&#x2F;get?key1&#x3D;python&amp;key2&#x3D;java&#39;&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Post请求"><a href="#Post请求" class="headerlink" title="Post请求"></a>Post请求</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;https://www.lagou.com/jobs/positionAjax.json?city=%E6%B7%B1%E5%9C%B3&amp;needAddtionalResult=false&amp;isSchoolJob=0&quot;</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">     <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://www.lagou.com/jobs/list_python?labelWords=&amp;fromSearch=true&amp;suginput=&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">     <span class="string">&#x27;first&#x27;</span>: <span class="string">&#x27;true&#x27;</span>,</span><br><span class="line">     <span class="string">&#x27;pn&#x27;</span>: <span class="number">1</span>,</span><br><span class="line">     <span class="string">&#x27;kd&#x27;</span>: <span class="string">&#x27;python&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resp = requests.post(url,headers=headers,data=data)</span><br><span class="line"><span class="comment"># 如果是json数据，直接可以调用json方法</span></span><br><span class="line">print(resp.json())</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#39;status&#39;: False, &#39;msg&#39;: &#39;请求成功!&#39;, &#39;clientIp&#39;: &#39;111.14.212.75&#39;, &#39;state&#39;: 2402&#125;</span><br></pre></td></tr></table></figure>

<h5 id="随机浏览器头"><a href="#随机浏览器头" class="headerlink" title="随机浏览器头"></a>随机浏览器头</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"> </span><br><span class="line"><span class="keyword">from</span> fake_useragent <span class="keyword">import</span> UserAgent</span><br><span class="line">ua = UserAgent()</span><br><span class="line">ua.update()  <span class="comment"># 更新用户代理列表</span></span><br><span class="line"> </span><br><span class="line">headers = &#123;<span class="string">&#x27;User-Agent&#x27;</span>: ua.random&#125;</span><br><span class="line"> </span><br><span class="line">response = requests.get(<span class="string">&#x27;http://steady.net&#x27;</span>, headers=headers)</span><br></pre></td></tr></table></figure>

<h5 id="Get请求与Post请求设置代理"><a href="#Get请求与Post请求设置代理" class="headerlink" title="Get请求与Post请求设置代理"></a>Get请求与Post请求设置代理</h5><p>使用<code>requests</code>添加代理也非常简单，只要在请求的方法中（比如<code>get</code>或者<code>post</code>）传递<code>proxies</code>参数就可以了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://httpbin.org/get&quot;</span></span><br><span class="line"></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/62.0.3202.94 Safari/537.36&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">proxy = &#123;</span><br><span class="line">    <span class="string">&#x27;http&#x27;</span>: <span class="string">&#x27;171.14.209.180:27829&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">resp = requests.get(url,headers=headers,proxies=proxy)</span><br><span class="line">print(resp.text)</span><br></pre></td></tr></table></figure>

<h5 id="处理请求包"><a href="#处理请求包" class="headerlink" title="处理请求包"></a>处理请求包</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://baidu.com&quot;</span></span><br><span class="line"></span><br><span class="line">respone=requests.get(<span class="string">&quot;http://baidu.com&quot;</span>)</span><br><span class="line"></span><br><span class="line">print(respone.headers)</span><br><span class="line"></span><br><span class="line">print(respone.headers[<span class="string">&#x27;Server&#x27;</span>])</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">➜  Desktop python3 <span class="number">1.</span>py</span><br><span class="line">&#123;<span class="string">&#x27;Date&#x27;</span>: <span class="string">&#x27;Mon, 28 Sep 2020 07:20:24 GMT&#x27;</span>, <span class="string">&#x27;Server&#x27;</span>: <span class="string">&#x27;Apache&#x27;</span>, <span class="string">&#x27;Last-Modified&#x27;</span>: <span class="string">&#x27;Tue, 12 Jan 2010 13:48:00 GMT&#x27;</span>, <span class="string">&#x27;ETag&#x27;</span>: <span class="string">&#x27;&quot;51-47cf7e6ee8400&quot;&#x27;</span>, <span class="string">&#x27;Accept-Ranges&#x27;</span>: <span class="string">&#x27;bytes&#x27;</span>, <span class="string">&#x27;Content-Length&#x27;</span>: <span class="string">&#x27;81&#x27;</span>, <span class="string">&#x27;Cache-Control&#x27;</span>: <span class="string">&#x27;max-age=86400&#x27;</span>, <span class="string">&#x27;Expires&#x27;</span>: <span class="string">&#x27;Tue, 29 Sep 2020 07:20:24 GMT&#x27;</span>, <span class="string">&#x27;Connection&#x27;</span>: <span class="string">&#x27;Keep-Alive&#x27;</span>, <span class="string">&#x27;Content-Type&#x27;</span>: <span class="string">&#x27;text/html&#x27;</span>&#125;</span><br><span class="line">Apache</span><br></pre></td></tr></table></figure>

<ul>
<li>respone.headers请求包的请求头，返回值是一个字典。</li>
<li>通过对字典操作，取出对应的请求头。</li>
</ul>
<h5 id="超时"><a href="#超时" class="headerlink" title="超时"></a>超时</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://baidu.com&quot;</span></span><br><span class="line"></span><br><span class="line">respone=requests.get(<span class="string">&quot;http://sss.com&quot;</span>,timeout=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(respone.reason)</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">requests.exceptions.ConnectTimeout: HTTPConnectionPool(host=<span class="string">&#x27;sss.com&#x27;</span>, port=<span class="number">80</span>): Max retries exceeded <span class="keyword">with</span> url: / (Caused by ConnectTimeoutError(&lt;urllib3.connection.HTTPConnection object at <span class="number">0x10f118550</span>&gt;, <span class="string">&#x27;Connection to sss.com timed out. (connect timeout=1)&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>timeout 仅对连接过程有效，与响应体的下载无关。 timeout 并不是整个下载响应的时间限制，而是如果服务器在 timeout 秒内没有应答，将会引发一个异常（更精确地说，是在 timeout 秒内没有从基础套接字上接收到任何字节的数据时）If no timeout is specified explicitly, requests do not time out。</p>
<h5 id="cookie操作"><a href="#cookie操作" class="headerlink" title="cookie操作"></a>cookie操作</h5><p>获取cookie</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">r = requests.get(<span class="string">&quot;https://www.csdn.net&quot;</span>)</span><br><span class="line">print(type(r.cookies), r.cookies)</span><br><span class="line"><span class="keyword">for</span> key, value <span class="keyword">in</span> r.cookies.items():</span><br><span class="line">    print(key + <span class="string">&#x27;=&#x27;</span> + value)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;class &#39;requests.cookies.RequestsCookieJar&#39;&gt; &lt;RequestsCookieJar[&lt;Cookie dc_session_id&#x3D;10_1575798031732.659641 for .csdn.net&#x2F;&gt;, &lt;Cookie uuid_tt_dd&#x3D;10_19615575150-1575798031732-646184 for .csdn.net&#x2F;&gt;, &lt;Cookie acw_tc&#x3D;2760827715757980317314369e26895215355a996a74e112d9936f512dacd1 for www.csdn.net&#x2F;&gt;]&gt;</span><br><span class="line">dc_session_id&#x3D;10_1575798031732.659641</span><br><span class="line">uuid_tt_dd&#x3D;10_19615575150-1575798031732-646184</span><br><span class="line">acw_tc&#x3D;2760827715757980317314369e26895215355a996a74e112d9936f512dacd1</span><br></pre></td></tr></table></figure>

<p>在 Requests 中我们使用 <code>cookies</code> 属性就可以直接得到 Cookies 。通过打印我们可以发现它的类型是 <code>requests.cookies.RequestsCookieJar</code> ，然后用 <code>items()</code> 方法将其转化为元组组成的列表，遍历输出每一个 Cookie 的名称和值，实现 Cookie 的遍历解析。</p>
<p>共享cookie</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># 通过Session类新建一个会话</span></span><br><span class="line">session = requests.Session()</span><br><span class="line">post_url = <span class="string">&#x27;https://passport.weibo.cn/sso/login&#x27;</span></span><br><span class="line"><span class="comment"># 往下使用requests的地方，直接使用session即可，session就会保存服务器发送过来的cookie信息</span></span><br><span class="line">headers = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;Referer&#x27;</span>: <span class="string">&#x27;https://passport.weibo.cn/signin/login?entry=mweibo&amp;r=http%3A%2F%2Fweibo.cn%2F&amp;backTitle=%CE%A2%B2%A9&amp;vt=&#x27;</span>,</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">data = &#123;</span><br><span class="line">    <span class="string">&#x27;username&#x27;</span>: <span class="string">&#x27;17312345678&#x27;</span>, <span class="comment"># 账号</span></span><br><span class="line">    <span class="string">&#x27;password&#x27;</span>: <span class="string">&#x27;password&#x27;</span>, <span class="comment"># 密码</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">r = session.post(url=post_url, data=data, headers=headers)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 上面的session会保存会话，往下发送请求，直接使用session即可</span></span><br><span class="line">url = <span class="string">&#x27;https://weibo.cn/6388179289/info&#x27;</span></span><br><span class="line">headers1 = &#123;</span><br><span class="line">    <span class="string">&#x27;User-Agent&#x27;</span>: <span class="string">&#x27;Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/63.0.3239.108 Safari/537.36&#x27;</span>,</span><br><span class="line">&#125;</span><br><span class="line">r = session.get(url=url, headers=headers1)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">s&#x3D;requests.get(&#39;https:&#x2F;&#x2F;httpbin.org&#x2F;cookies&#x2F;set&#x2F;number&#x2F;123456789&#39;)</span><br><span class="line">r &#x3D; requests.get(&#39;https:&#x2F;&#x2F;httpbin.org&#x2F;cookies&#39;)</span><br><span class="line">print(s.text)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure>

<p>可以发现两次get请求第一次有cookie但是第二次没cookie</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ python &#x2F;Users&#x2F;apple&#x2F;Desktop&#x2F;1.py</span><br><span class="line">&#123;</span><br><span class="line">  &quot;cookies&quot;: &#123;</span><br><span class="line">    &quot;number&quot;: &quot;123456789&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;cookies&quot;: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果使用Session()</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">s &#x3D; requests.Session()</span><br><span class="line">s.get(&#39;https:&#x2F;&#x2F;httpbin.org&#x2F;cookies&#x2F;set&#x2F;number&#x2F;123456789&#39;)</span><br><span class="line">print(s.text)</span><br><span class="line">r &#x3D; s.get(&#39;https:&#x2F;&#x2F;httpbin.org&#x2F;cookies&#39;)</span><br><span class="line">print(r.text)</span><br></pre></td></tr></table></figure>

<p>可以看到两个回话都带有相同cookie</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">➜  ~ python &#x2F;Users&#x2F;apple&#x2F;Desktop&#x2F;1.py</span><br><span class="line">&#123;</span><br><span class="line">  &quot;cookies&quot;: &#123;</span><br><span class="line">    &quot;number&quot;: &quot;123456789&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  &quot;cookies&quot;: &#123;</span><br><span class="line">    &quot;number&quot;: &quot;123456789&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="requests请求返回对象Response的常用方法"><a href="#requests请求返回对象Response的常用方法" class="headerlink" title="requests请求返回对象Response的常用方法"></a>requests请求返回对象Response的常用方法</h5><p>Response响应类常用属性与方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Response.url           请求url，[见示例2.1]</span><br><span class="line">Response.status_code   响应状态码，[见示例2.1]</span><br><span class="line">Response.text          获取响应内容，[见示例2.1]</span><br><span class="line">Response.json()	       活动响应的JSON内容，[见示例2.1]</span><br><span class="line">Response.ok            请求是否成功，status_code&lt;400 返回True</span><br><span class="line">Response.headers       响应header信息，[见示例2.1]</span><br><span class="line">Response.cookies       响应的cookie，[见示例2.1]</span><br><span class="line">Response.elapsed       请求响应的时间。</span><br><span class="line">Response.links         返回响应头部的links连接，相当于Response.headers.get(&#39;link&#39;)</span><br><span class="line">Response.raw           获取原始套接字响应，需要将初始请求参数stream&#x3D;True</span><br><span class="line">Response.content        以字节形式获取响应提，多用于非文本请求，[见示例2.2]</span><br><span class="line">Response.iter_content() 迭代获取响应数据，[见示例2.2]</span><br><span class="line">Response.history	重定向请求历史记录</span><br><span class="line">Response.reason		响应状态的文本原因，如：&quot;Not Found&quot; or &quot;OK&quot;</span><br><span class="line">Response.close()	关闭并释放链接，释放后不能再次访问’raw’对象。一般不会调用。</span><br></pre></td></tr></table></figure>

<h5 id="requests的content和text方法的区别"><a href="#requests的content和text方法的区别" class="headerlink" title="requests的content和text方法的区别"></a>requests的content和text方法的区别</h5><ul>
<li><p>resp.text返回的是Unicode型的数据。</p>
</li>
<li><p>resp.content返回的是bytes型也就是二进制的数据。</p>
<p>简而言之，.text是现成的字符串，.content还要编码，但是.text不是所有时候显示都正常，这是就需要用.content进行手动编码。通常我们需要<code>.content.decode(&#39;编码格式&#39;)</code>，其中编码格式我们需要右键网页源代码，查看网页的编码。</p>
</li>
<li><p>如果你想取文本，可以通过r.text。</p>
<p>如果想取图片，文件，则可以通过r.content。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line"></span><br><span class="line">jpg_url &#x3D; &#39;http:&#x2F;&#x2F;img2.niutuku.com&#x2F;1312&#x2F;0804&#x2F;0804-niutuku.com-27840.jpg&#39;</span><br><span class="line"></span><br><span class="line">content &#x3D; requests.get(jpg_url).content</span><br><span class="line"></span><br><span class="line">with open(&#39;demo.jpg&#39;, &#39;wb&#39;) as fp:</span><br><span class="line">    fp.write(content)</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h3 id="数据提取"><a href="#数据提取" class="headerlink" title="数据提取"></a>数据提取</h3><h4 id="XPath"><a href="#XPath" class="headerlink" title="XPath"></a>XPath</h4><p>xpath（XML Path Language）是一门在XML和HTML文档中查找信息的语言，可用来在XML和HTML文档中对元素和属性进行遍历。</p>
<h5 id="XPath语法"><a href="#XPath语法" class="headerlink" title="XPath语法"></a>XPath语法</h5><p><img src="https://steady-1302023625.cos.ap-beijing.myqcloud.com/makedown/image-20200928201555572.png" alt="image-20200928201555572"></p>
<h5 id="XPATH语法"><a href="#XPATH语法" class="headerlink" title="XPATH语法"></a>XPATH语法</h5><p><img src="https://steady-1302023625.cos.ap-beijing.myqcloud.com/makedown/image-20200928202240146.png" alt="image-20200928202240146"></p>
<p>补充</p>
<table>
<thead>
<tr>
<th>/</th>
<th>如果是在最前面，代表从根节点选取。否则选择某节点下的某个节点</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>//</td>
<td>从全局节点中选择节点，随便在哪个位置</td>
<td></td>
</tr>
<tr>
<td>@</td>
<td>选取某个节点的属性</td>
<td></td>
</tr>
<tr>
<td>.</td>
<td>当前节点</td>
<td></td>
</tr>
</tbody></table>
<h5 id="lxml库"><a href="#lxml库" class="headerlink" title="lxml库"></a>lxml库</h5><p>lxml 是 一个HTML/XML的解析器，主要的功能是如何解析和提取 HTML/XML 数据。</p>
<ol>
<li><p>导入lxml 的 etree 库 <code>from lxml import etree</code></p>
</li>
<li><p>利用etree.HTML，将html字符串（bytes类型或str类型）转化为Element对象，Element对象具有xpath的方法，返回结果的列表</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">html &#x3D; etree.HTML(text) </span><br><span class="line">ret_list &#x3D; html.xpath(&quot;xpath语法规则字符串&quot;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>xpath方法返回列表的三种情况</p>
<ul>
<li><p>返回空列表：根据xpath语法规则字符串，没有定位到任何元素</p>
</li>
<li><p>返回由字符串构成的列表：xpath字符串规则匹配的一定是文本内容或某属性的值</p>
</li>
<li><p>返回由Element对象构成的列表：xpath规则字符串匹配的是标签，列表中的Element对象可以继续进行xpath</p>
</li>
</ul>
</li>
</ol>
<h4 id="BeautifulSoup4"><a href="#BeautifulSoup4" class="headerlink" title="BeautifulSoup4"></a>BeautifulSoup4</h4><p>Beautiful Soup 也是一个HTML/XML的解析器，主要的功能也是如何解析和提取 HTML/XML 数据。<br>lxml 只会局部遍历，而Beautiful Soup 是基于HTML DOM（Document Object Model）的，会载入整个文档，解析整个DOM树，因此时间和内存开销都会大很多，所以性能要低于lxml。<br>BeautifulSoup 用来解析 HTML 比较简单，API非常人性化，支持CSS选择器、Python标准库中的HTML解析器，也支持 lxml 的 XML解析器。</p>
<p>Beautiful Soup将复杂HTML文档转换成一个复杂的树形结构,每个节点都是Python对象,所有对象可以归纳为4种:</p>
<ol>
<li>Tag </li>
<li>NavigatableString </li>
<li>BeautifulSoup </li>
<li>Comment</li>
</ol>
<h5 id="创建bs对象"><a href="#创建bs对象" class="headerlink" title="创建bs对象"></a>创建bs对象</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoupimport requestsresponse &#x3D; requests.get(&#39;https:&#x2F;&#x2F;book.douban.com&#x2F;&#39;).text# print(response)# 创建bs对象soup &#x3D; BeautifulSoup(response, &#39;lxml&#39;)  # 使用到了lxml解析库</span><br></pre></td></tr></table></figure>

<h5 id="Tag"><a href="#Tag" class="headerlink" title="Tag"></a>Tag</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"></span><br><span class="line">html = <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">&lt;html&gt;&lt;head&gt;&lt;title&gt;The Dormouse&#x27;s story&lt;/title&gt;&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;title&quot; name=&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#x27;s story&lt;/b&gt;&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;Once upon a time there were three little sisters; and their names were</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/elsie&quot; class=&quot;sister&quot; id=&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;/a&gt;,</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/lacie&quot; class=&quot;sister&quot; id=&quot;link2&quot;&gt;Lacie&lt;/a&gt; and</span></span><br><span class="line"><span class="string">&lt;a href=&quot;http://example.com/tillie&quot; class=&quot;sister&quot; id=&quot;link3&quot;&gt;Tillie&lt;/a&gt;;</span></span><br><span class="line"><span class="string">and they lived at the bottom of a well.&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;p class=&quot;story&quot;&gt;...&lt;/p&gt;</span></span><br><span class="line"><span class="string">&quot;&quot;&quot;</span></span><br><span class="line">soup = BeautifulSoup(html,<span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line">print(soup.title)</span><br><span class="line">print(soup.head)</span><br><span class="line">print(soup.a)</span><br><span class="line">print(soup.p)</span><br><span class="line">print(type(soup.p))</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;title&gt;The Dormouse&#39;s story&lt;&#x2F;title&gt;</span><br><span class="line">&lt;head&gt;&lt;title&gt;The Dormouse&#39;s story&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;</span><br><span class="line">&lt;a class&#x3D;&quot;sister&quot; href&#x3D;&quot;http:&#x2F;&#x2F;example.com&#x2F;elsie&quot; id&#x3D;&quot;link1&quot;&gt;&lt;!-- Elsie --&gt;&lt;&#x2F;a&gt;</span><br><span class="line">&lt;p class&#x3D;&quot;title&quot; name&#x3D;&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#39;s story&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;</span><br><span class="line">&lt;class &#39;bs4.element.Tag&#39;&gt;</span><br></pre></td></tr></table></figure>

<p>我们可以利用 soup 加标签名轻松地获取这些标签的内容，这些对象的类型是bs4.element.Tag。但是注意，它查找的是在所有内容中的第一个符合要求的标签。如果要查询所有的标签，后面会进行介绍。</p>
<h5 id="Tag的两个重要的属性"><a href="#Tag的两个重要的属性" class="headerlink" title="Tag的两个重要的属性"></a>Tag的两个重要的属性</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">print soup.name</span><br><span class="line"># [document] #soup 对象本身比较特殊，它的 name 即为 [document]</span><br><span class="line"></span><br><span class="line">print soup.head.name</span><br><span class="line"># head #对于其他内部标签，输出的值便为标签本身的名称</span><br><span class="line"></span><br><span class="line">print soup.p.attrs</span><br><span class="line"># &#123;&#39;class&#39;: [&#39;title&#39;], &#39;name&#39;: &#39;dromouse&#39;&#125;</span><br><span class="line"># 在这里，我们把 p 标签的所有属性打印输出了出来，得到的类型是一个字典。</span><br><span class="line"></span><br><span class="line">print soup.p[&#39;class&#39;] # soup.p.get(&#39;class&#39;)</span><br><span class="line"># [&#39;title&#39;] #还可以利用get方法，传入属性的名称，二者是等价的</span><br><span class="line"></span><br><span class="line">soup.p[&#39;class&#39;] &#x3D; &quot;newClass&quot;</span><br><span class="line">print soup.p # 可以对这些属性和内容等等进行修改</span><br><span class="line"># &lt;p class&#x3D;&quot;newClass&quot; name&#x3D;&quot;dromouse&quot;&gt;&lt;b&gt;The Dormouse&#39;s story&lt;&#x2F;b&gt;&lt;&#x2F;p&gt;</span><br></pre></td></tr></table></figure>

<h5 id="NavigableString"><a href="#NavigableString" class="headerlink" title="NavigableString"></a>NavigableString</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如果拿到标签后，还想获取标签中的内容。那么可以通过tag.string获取标签中的文字。示例代码如下：</span><br><span class="line"></span><br><span class="line">print soup.p.string</span><br><span class="line"># The Dormouse&#39;s story</span><br><span class="line"></span><br><span class="line">print type(soup.p.string)</span><br><span class="line"># &lt;class &#39;bs4.element.NavigableString&#39;&gt;thon</span><br></pre></td></tr></table></figure>

<h5 id="搜索文档树"><a href="#搜索文档树" class="headerlink" title="搜索文档树"></a>搜索文档树</h5><h6 id="find和find-all方法"><a href="#find和find-all方法" class="headerlink" title="find和find_all方法"></a>find和find_all方法</h6><p>搜索文档树，一般用得比较多的就是两个方法，一个是<code>find</code>，一个是<code>find_all</code>。<code>find</code>方法是找到第一个满足条件的标签后就立即返回，只返回一个元素。<code>find_all</code>方法是把所有满足条件的标签都选到，然后返回回去。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">soup.find_all(&quot;a&quot;,attrs&#x3D;&#123;&quot;id&quot;:&quot;link2&quot;&#125;)</span><br><span class="line">或者是直接传入属性的的名字作为关键字参数：</span><br><span class="line">soup.find_all(&quot;a&quot;,id&#x3D;&#39;link2&#39;)</span><br></pre></td></tr></table></figure>

<h6 id="select方法"><a href="#select方法" class="headerlink" title="select方法"></a>select方法</h6><p>使用以上方法可以方便的找出元素。但有时候使用<code>css</code>选择器的方式可以更加的方便。使用<code>css</code>选择器的语法，应该使用<code>select</code>方法。以下列出几种常用的<code>css</code>选择器方法：</p>
<p>（1）通过标签名查找：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">&#x27;a&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>（2）通过类名查找：</p>
<p>通过类名，则应该在类的前面加一个<code>.</code>。比如要查找<code>class=sister</code>的标签。示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">&#x27;.sister&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>（3）通过id查找：</p>
<p>通过id查找，应该在id的名字前面加一个＃号。示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">&quot;#link1&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>（4）组合查找：</p>
<p>组合查找即和写 class 文件时，标签名与类名、id名进行的组合原理是一样的，例如查找 p 标签中，id 等于 link1的内容，二者需要用空格分开：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">&quot;p #link1&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>直接子标签查找，则使用 &gt; 分隔：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">&quot;head &gt; title&quot;</span>))</span><br></pre></td></tr></table></figure>

<p>（5）通过属性查找：</p>
<p>查找时还可以加入属性元素，属性需要用中括号括起来，注意属性和标签属于同一节点，所以中间不能加空格，否则会无法匹配到。示例代码如下：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">print(soup.select(<span class="string">&#x27;a[href=&quot;http://example.com/elsie&quot;]&#x27;</span>))</span><br></pre></td></tr></table></figure>

<p>（6）获取内容</p>
<p>以上的 select 方法返回的结果都是列表形式，可以遍历形式输出，然后用 get_text() 方法来获取它的内容。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">soup = BeautifulSoup(html, <span class="string">&#x27;lxml&#x27;</span>)</span><br><span class="line"><span class="keyword">print</span> type(soup.select(<span class="string">&#x27;title&#x27;</span>))</span><br><span class="line"><span class="keyword">print</span> soup.select(<span class="string">&#x27;title&#x27;</span>)[<span class="number">0</span>].get_text()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> title <span class="keyword">in</span> soup.select(<span class="string">&#x27;title&#x27;</span>):</span><br><span class="line">    <span class="keyword">print</span> title.get_text()</span><br></pre></td></tr></table></figure>

<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><h4 id="数量词"><a href="#数量词" class="headerlink" title="数量词"></a><strong>数量词</strong></h4><ul>
<li><code>&#123;n&#125;</code>——作用于前一个字符或子表达式，匹配它重复n次</li>
<li><code>&#123;min,max&#125;</code>——作用于前一个字符或子表达式，匹配它重复重复多少次min~max次，min和max可只写一个设置重复下限或上限，但逗号不能省，不写min时min默认为0</li>
<li><code>*</code>——星号，作用于前一个字符或子表达式，匹配它零次或多次</li>
<li><code>+</code>——作用于前一个字符或子表达式，匹配它至少一次</li>
<li><code>?</code>——作用于前一个字符或子表达式，匹配它零次或一次</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r&#39;z&#123;3&#125;&#39;#匹配zzz</span><br><span class="line">r&#39;z&#123;0,3&#125;&#39;#匹配z或zz或zzz</span><br><span class="line">r&#39;(?:abc)&#123;2&#125;&#39;#对子表达式匹配两次，匹配abcabc，(?:)是一个用法，不分组的意思，详看后面</span><br><span class="line">#星号加号问号同理</span><br></pre></td></tr></table></figure>



<h4 id="预定字符集"><a href="#预定字符集" class="headerlink" title="预定字符集"></a><strong>预定字符集</strong></h4><ul>
<li><code>\d</code>——匹配任一个数字（0~9）</li>
<li><code>\D</code>——匹配一个非数字字符，与\d互补</li>
<li><code>\s</code>——匹配一个空白字符，包括空格，\t,\n,\r,\n,\f,\v</li>
<li><code>\S</code>——匹配一个非空白字符</li>
<li><code>\w</code>——匹配一个单词字符。unicode下匹配各种语言的单个字符，单个数字，和下横线。ASCII下匹配单个英文字母，单个数字，和下横线</li>
<li><code>\W</code>——匹配一个非单词字符</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r&#39;\w&#39; #能匹配&#39;物语&amp;ものがたり&#39;中的：物，语，も，の，が，た，り，汉语日语的单字，其他语言同理</span><br></pre></td></tr></table></figure>

<h4 id="分组-amp-或-amp-转义"><a href="#分组-amp-或-amp-转义" class="headerlink" title="分组&amp;或&amp;转义"></a><strong>分组&amp;或&amp;转义</strong></h4><ul>
<li><code>()</code>——括号，表达式分组（第n组，n=1，2，3….99，从左往右数），并形成子表达式</li>
<li><code>(?P&lt;name&gt;)</code>——拥有括号的功能，但能为该分组再指定一个自定名字</li>
<li><code>(?P=name)</code>——引用分配过名字的分组，但没有分组功能</li>
<li><code>|</code>——或，左右规则任意匹配一个，从左往右尝试匹配，一旦成功就跳过后面的规则。|没被包在括号中间的话它的作用域是整个表达式，被包的话作用域在括号内</li>
<li><code>\</code>——反斜杠，后接功能字有符转义功能，后接数字（1到99）有引用分组的功能，后接某些字母又有特殊功能</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">r&#39;abc|def|ghi&#39;#匹配abc或def或ghi</span><br><span class="line">r&#39;ma(?:k|d)e&#39;#匹配make或made</span><br><span class="line">r&#39;(abc)def\1&#39;#相当于r&#39;(abc)defabc&#39;,匹配abcdefabc</span><br><span class="line">r&#39;(?P&lt;ok&gt;abc)f(?P&#x3D;ok)&#39;#为(abc)子组分配了“ok”的名字，然后再引用，匹配abcfabc</span><br></pre></td></tr></table></figure>

<h4 id="边界匹配"><a href="#边界匹配" class="headerlink" title="边界匹配"></a><strong>边界匹配</strong></h4><ul>
<li><code>^</code>——放在表达式的最前面，作用域是表达式，在多行模式中，在每一行匹配字符串开头（多行模式要手动开启，否则和\A没什么区别）</li>
<li><code>$</code>——放在表达式的最后面，作用域是表达式，在多行模式中，在每一行匹配字符串末尾（多行模式要手动开启，否则和\Z没什么区别）</li>
<li><code>\A</code>——放在表达式的最前面，作用域是表达式，匹配字符串开头，不能多行匹配</li>
<li><code>\Z</code>——放在表达式的最后面，作用域是表达式，匹配字符串末尾，不能多行匹配</li>
<li><code>\b</code>——不匹配字符，只匹配一个边界，匹配\w和\W或\W和\w的边界（单词字符和非单词字符的边界）</li>
<li><code>\B</code>——不匹配字符，只匹配一个边界，与\b相反，匹配\w和\w或\W和\W的边界</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">r&#39;^abc|^def&#39;#匹配abc开头或def开头，开启了多行模式时，对字符串&#39;abcd\ndefh&#39;能匹配出abc，def两个</span><br><span class="line">r&#39;abc$|def$&#39;#匹配abc结尾或def结尾，开启了多行模式时，对字符串&#39;0abc\n0def&#39;能匹配出abc，def两个</span><br><span class="line">r&#39;\Aabc&#39;#匹配abc开头，因为不能多行匹配，就算开启多行模式，对字符串&#39;abcd\nabcd&#39;只能匹配到前面的abc</span><br><span class="line">#\Z同理</span><br><span class="line">r&#39;\w\b\W&#39;#匹配“单词字符+非单词字符”的结构如&#39;a!&#39;,&#39;1%&#39;</span><br><span class="line">#\B同理</span><br></pre></td></tr></table></figure>

<h4 id="标志位-flags"><a href="#标志位-flags" class="headerlink" title="标志位 flags"></a>标志位 flags</h4><p>正则表达式可以包含一些可选标志修饰符来控制匹配的模式。修饰符被指定为一个可选的标志，如 <code>re.I | re.M</code> 被同时设置成 I 和 M 标志：</p>
<table>
<thead>
<tr>
<th align="left">修饰符</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">re.I</td>
<td align="left">忽略大小写（常用）</td>
</tr>
<tr>
<td align="left">re.L</td>
<td align="left">做本地化识别（locale-aware）匹配</td>
</tr>
<tr>
<td align="left">re.M</td>
<td align="left">多行匹配，影响 ^ 和 $</td>
</tr>
<tr>
<td align="left">re.S</td>
<td align="left">使 . 匹配包括换行在内的所有字符</td>
</tr>
<tr>
<td align="left">re.U</td>
<td align="left">根据Unicode字符集解析字符。这个标志影响 \w, \W, \b, \B.</td>
</tr>
<tr>
<td align="left">re.X</td>
<td align="left">该标志通过给予更灵活的格式，以便将正则表达式写得更易于理解。</td>
</tr>
</tbody></table>
<h4 id="re模块中的函数"><a href="#re模块中的函数" class="headerlink" title="re模块中的函数"></a>re模块中的函数</h4><h5 id="re-match函数"><a href="#re-match函数" class="headerlink" title="re.match函数"></a>re.match函数</h5><p>match 方法用于查找字符串的头部（也可以指定起始位置），它是一次匹配，只要找到了一个匹配的结果就返回，而不是查找所有匹配的结果。</p>
<p>一次匹配，只要找到就返回找到的结果。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re   <span class="comment"># 使用之前先进行导入re模块</span></span><br><span class="line">re.match(pattern, string, flags)   <span class="comment"># match方法为例</span></span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th align="left">参数</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pattern</td>
<td align="left">匹配的正则表达式</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">要匹配的字符串</td>
</tr>
<tr>
<td align="left">flags</td>
<td align="left">标志位，用于控制正则表达式的匹配方式，如：是否区分大小写，多行匹配等等。</td>
</tr>
</tbody></table>
<p>该方法的结果是<strong>返回一个正则匹配对象</strong>，通过两个方法获取相关内容：</p>
<ul>
<li>通过 <code>group()</code> 来获取内容</li>
<li>通过 <code>span()</code> 来获取范围：匹配到字符的开始和结束的索引位置</li>
</ul>
<h5 id="re-search函数"><a href="#re-search函数" class="headerlink" title="re.search函数"></a>re.search函数</h5><p>re.search<code>方法扫描整个字符串，返回的是第一个成功匹配的字符串，否则就返回</code>None。</p>
<h5 id="re-split函数"><a href="#re-split函数" class="headerlink" title="re.split函数"></a>re.split函数</h5><p>主要适用于将字符串进行分割：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">re.split(pattern, string,maxsplit=<span class="number">0</span>,flags=<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<p>用 <code>pattern</code> 分开 <code>string</code> 。</p>
<h5 id="re-findall函数"><a href="#re-findall函数" class="headerlink" title="re.findall函数"></a>re.findall函数</h5><p>找出所有满足条件的，返回的是一个列表。</p>
<p>match 和 search 方法都是一次匹配，只要找到了一个匹配的结果就返回。然而，在大多数时候，我们需要搜索整个字符串，获得所有匹配的结果。</p>
<h5 id="re-sub函数"><a href="#re-sub函数" class="headerlink" title="re.sub函数"></a>re.sub函数</h5><p>用来替换字符串。将匹配到的字符串替换为其他字符串。</p>
<h4 id="取回匹配的数据"><a href="#取回匹配的数据" class="headerlink" title="取回匹配的数据"></a>取回匹配的数据</h4><p>在正则表达式中，可以对过滤到的字符串进行分组。分组使用圆括号的方式。将每一个正则表达式使用括号括起来。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">group()：和group(0)是等价的，返回的是整个满足条件的字符串。</span><br><span class="line">groups()：返回的是里面的子组。索引从1开始。</span><br><span class="line">group(n)：返回的是第一个子组，可以传入多个。</span><br></pre></td></tr></table></figure>

<h4 id="r"><a href="#r" class="headerlink" title="r"></a>r</h4><p> Python中字符串前面加上 r 表示原生字符串 。</p>
<h4 id="贪婪模式与非贪婪模式"><a href="#贪婪模式与非贪婪模式" class="headerlink" title="贪婪模式与非贪婪模式"></a>贪婪模式与非贪婪模式</h4><p>贪婪模式：正则表达式会匹配尽量多的字符。默认是贪婪模式。</p>
<p>非贪婪模式：正则表达式会尽量少的匹配字符。</p>
<p>贪婪模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#39;&lt;div class&#x3D;&quot;cont&quot;&gt;.*&lt;b&gt;(.*)&lt;&#x2F;b&gt;&#39;,text,re.DOTALL)</span><br></pre></td></tr></table></figure>

<p>非贪婪模式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">(&#39;&lt;div class&#x3D;&quot;cont&quot;&gt;.*?&lt;b&gt;(.*)&lt;&#x2F;b&gt;&#39;,text,re.DOTALL)</span><br></pre></td></tr></table></figure>

<p>可以看到非贪婪模式使用?表示只匹配一次或者匹配零次。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">text=<span class="string">&#x27;&lt;div class=&quot;cont&quot;&gt;&lt;p&gt;sdf&lt;/p&gt;&lt;b&gt;steady&lt;/b&gt;&lt;b&gt;s1eady&lt;/b&gt;&#x27;</span></span><br><span class="line">print(text)</span><br><span class="line">resault=re.findall(<span class="string">r&#x27;&lt;div class=&quot;cont&quot;&gt;.*&lt;b&gt;(.*?)&lt;/b&gt;&#x27;</span>,text,re.DOTALL)</span><br><span class="line">print(<span class="string">&quot;贪婪模式&quot;</span> + str(resault))</span><br><span class="line">resault=re.findall(<span class="string">r&#x27;&lt;div class=&quot;cont&quot;&gt;.*?&lt;b&gt;(.*?)&lt;/b&gt;&#x27;</span>,text,re.DOTALL)</span><br><span class="line">print(<span class="string">&quot;非贪婪模式&quot;</span> + str(resault))</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">贪婪模式[&#39;s1eady&#39;]</span><br><span class="line">非贪婪模式[&#39;steady&#39;]</span><br></pre></td></tr></table></figure>

<p>可以看到主要是使用?匹配一次或者零次，来阻止贪婪模式。</p>
<h4 id="中括号和括号"><a href="#中括号和括号" class="headerlink" title="中括号和括号"></a>中括号和括号</h4><p><code>()</code>是为了提取匹配的字符串。表达式中有几个()就有几个相应的匹配字符串。</p>
<p><code>[]</code>是定义匹配的字符范围。比如 [a-zA-Z0-9] 表示相应位置的字符要匹配英文字符和数字。<code>[\s*]</code>表示空格或者*号。</p>
<p>圆括号()是组，主要应用在限制多选结构的范围/分组/捕获文本/环视/特殊模式处理。<code>()</code>内的内容表示的是一个子表达式，()本身不匹配任何东西，也不限制匹配任何东西，只是把括号内的内容作为同一个表达式来处理。</p>
<p><code>(abc|bcd|cde)</code>，表示这一段是abc、bcd、cde三者之一均可，顺序也必须一致。</p>
<p>方括号是单个匹配，字符集/排除字符集/命名字符集。<code>[]</code>表示匹配的字符在[]中，并且只能出现一次，并且特殊字符写在[]会被当成普通字符来匹配。</p>
<p><code>[0-3]</code>，表示找到这一个位置上的字符只能是0到3这四个数字，与(abc|bcd|cde)的作用比较类似，但圆括号可以匹配多个连续的字符，而一对方括号只能匹配单个字符。</p>
<h4 id="例子"><a href="#例子" class="headerlink" title="例子"></a>例子</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;steady&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;[e]&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/Users/apple/Desktop/steady.py&quot;</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    print(resault.group())</span><br><span class="line">AttributeError: <span class="string">&#x27;NoneType&#x27;</span> object has no attribute <span class="string">&#x27;group&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;steady&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;[s]&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;[\d]*&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7667</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;\d+&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7667</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;\d?&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;\d&#123;3&#125;&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">766</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;\d&#123;0,10&#125;&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">7667</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;^76&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">76</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">test=<span class="string">&quot;7667-786876&quot;</span></span><br><span class="line">resault=re.match(<span class="string">&#x27;^763&#x27;</span>,test)</span><br><span class="line">print(resault.group())</span><br></pre></td></tr></table></figure>

<p>输出</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;/Users/apple/Desktop/steady.py&quot;</span>, line <span class="number">4</span>, <span class="keyword">in</span> &lt;module&gt;</span><br><span class="line">    print(resault.group())</span><br><span class="line">AttributeError: <span class="string">&#x27;NoneType&#x27;</span> object has no attribute <span class="string">&#x27;group&#x27;</span></span><br></pre></td></tr></table></figure>

<h4 id="小案例"><a href="#小案例" class="headerlink" title="小案例"></a>小案例</h4><p>身份证</p>
<p>前17位必须是数字，后一位可以是数字或者x或者X。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">lists = [<span class="string">&#x27;370787199927261616&#x27;</span>,<span class="string">&#x27;370787199927261614&#x27;</span>,<span class="string">&#x27;3707871999272616SS&#x27;</span>,<span class="string">&#x27;37078719992726162X&#x27;</span>,<span class="string">&#x27;37078719992726D616&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> lists:</span><br><span class="line">    resault=re.match(<span class="string">&#x27;\d&#123;17&#125;[\dxX]&#x27;</span>,l)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        print(resault.group())</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>手机号</p>
<p>第一位必须是1，一共十一位，无字母。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">lists = [<span class="string">&#x27;19862123063&#x27;</span>,<span class="string">&#x27;29862123063&#x27;</span>,<span class="string">&#x27;198df123063&#x27;</span>,<span class="string">&#x27;1986212d063&#x27;</span>,<span class="string">&#x27;198621230dd&#x27;</span>,<span class="string">&#x27;1987261267171&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> lists:</span><br><span class="line">    resault=re.match(<span class="string">&#x27;1\d&#123;10&#125;&#x27;</span>,l)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        print(resault.group())</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>

<p>网站URL</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">lists = [<span class="string">&#x27;http://www.steady.com&#x27;</span>,<span class="string">&#x27;https://www.steady.com&#x27;</span>,<span class="string">&#x27;http:/www.steady.com&#x27;</span>,<span class="string">&#x27;http://www.steady.top&#x27;</span>,<span class="string">&#x27;http://ww.ls.com&#x27;</span>,<span class="string">&#x27;http://www.dd.com&#x27;</span>,<span class="string">&#x27;ftp://www.steady.com&#x27;</span>]</span><br><span class="line"><span class="keyword">for</span> l <span class="keyword">in</span> lists:</span><br><span class="line">    resault=re.match(<span class="string">&#x27;(ftp|http|https)://.*.(com|top)$&#x27;</span>,l)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        print(resault.group())</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure>



<h3 id="csv文件处理"><a href="#csv文件处理" class="headerlink" title="csv文件处理"></a>csv文件处理</h3><h5 id="读取csv文件"><a href="#读取csv文件" class="headerlink" title="读取csv文件"></a>读取csv文件</h5><p>表头不作为第一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">data &#x3D; pd.read_csv(&quot;&#x2F;Users&#x2F;apple&#x2F;Desktop&#x2F;huazhu.com.csv&quot;)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>

<p>表头作为第一行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import pandas as pd</span><br><span class="line">data &#x3D; pd.read_csv(&quot;&#x2F;Users&#x2F;apple&#x2F;Desktop&#x2F;huazhu.com.csv&quot;,header&#x3D;None)</span><br><span class="line">print(data)</span><br></pre></td></tr></table></figure>

<h5 id="获取数据"><a href="#获取数据" class="headerlink" title="获取数据"></a>获取数据</h5><p>获取指定列的数据，并存入一个数组中。</p>
<p>从文件中取出url并写入一个文件。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">data = pd.read_csv(<span class="string">&quot;/Users/apple/Desktop/huazhu.com.csv&quot;</span>)</span><br><span class="line">url = data[<span class="string">&quot;url&quot;</span>]</span><br><span class="line">url_list = np.array(url)</span><br><span class="line"><span class="keyword">with</span> open(<span class="string">&#x27;/Users/apple/Desktop/huazhu_url.txt&#x27;</span>,<span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> fp:</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> url_list:</span><br><span class="line">        print(i)</span><br><span class="line">        fp.write(i+<span class="string">&quot;\n&quot;</span>)</span><br></pre></td></tr></table></figure>


  </div>
</article>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/projects_url">项目</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#Python%E7%88%AC%E8%99%AB"><span class="toc-number">1.</span> <span class="toc-text">Python爬虫</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Requests%E5%BA%93"><span class="toc-number">2.</span> <span class="toc-text">Requests库</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#Get%E8%AF%B7%E6%B1%82"><span class="toc-number">2.0.1.</span> <span class="toc-text">Get请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Post%E8%AF%B7%E6%B1%82"><span class="toc-number">2.0.2.</span> <span class="toc-text">Post请求</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%9A%8F%E6%9C%BA%E6%B5%8F%E8%A7%88%E5%99%A8%E5%A4%B4"><span class="toc-number">2.0.3.</span> <span class="toc-text">随机浏览器头</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Get%E8%AF%B7%E6%B1%82%E4%B8%8EPost%E8%AF%B7%E6%B1%82%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86"><span class="toc-number">2.0.4.</span> <span class="toc-text">Get请求与Post请求设置代理</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E8%AF%B7%E6%B1%82%E5%8C%85"><span class="toc-number">2.0.5.</span> <span class="toc-text">处理请求包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B6%85%E6%97%B6"><span class="toc-number">2.0.6.</span> <span class="toc-text">超时</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#cookie%E6%93%8D%E4%BD%9C"><span class="toc-number">2.0.7.</span> <span class="toc-text">cookie操作</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#requests%E8%AF%B7%E6%B1%82%E8%BF%94%E5%9B%9E%E5%AF%B9%E8%B1%A1Response%E7%9A%84%E5%B8%B8%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-number">2.0.8.</span> <span class="toc-text">requests请求返回对象Response的常用方法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#requests%E7%9A%84content%E5%92%8Ctext%E6%96%B9%E6%B3%95%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.0.9.</span> <span class="toc-text">requests的content和text方法的区别</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%8F%90%E5%8F%96"><span class="toc-number">3.</span> <span class="toc-text">数据提取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#XPath"><span class="toc-number">3.1.</span> <span class="toc-text">XPath</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#XPath%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.1.</span> <span class="toc-text">XPath语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#XPATH%E8%AF%AD%E6%B3%95"><span class="toc-number">3.1.2.</span> <span class="toc-text">XPATH语法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#lxml%E5%BA%93"><span class="toc-number">3.1.3.</span> <span class="toc-text">lxml库</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#BeautifulSoup4"><span class="toc-number">3.2.</span> <span class="toc-text">BeautifulSoup4</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAbs%E5%AF%B9%E8%B1%A1"><span class="toc-number">3.2.1.</span> <span class="toc-text">创建bs对象</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tag"><span class="toc-number">3.2.2.</span> <span class="toc-text">Tag</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Tag%E7%9A%84%E4%B8%A4%E4%B8%AA%E9%87%8D%E8%A6%81%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">3.2.3.</span> <span class="toc-text">Tag的两个重要的属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#NavigableString"><span class="toc-number">3.2.4.</span> <span class="toc-text">NavigableString</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%90%9C%E7%B4%A2%E6%96%87%E6%A1%A3%E6%A0%91"><span class="toc-number">3.2.5.</span> <span class="toc-text">搜索文档树</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#find%E5%92%8Cfind-all%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.5.1.</span> <span class="toc-text">find和find_all方法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#select%E6%96%B9%E6%B3%95"><span class="toc-number">3.2.5.2.</span> <span class="toc-text">select方法</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">4.</span> <span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E9%87%8F%E8%AF%8D"><span class="toc-number">4.1.</span> <span class="toc-text">数量词</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A2%84%E5%AE%9A%E5%AD%97%E7%AC%A6%E9%9B%86"><span class="toc-number">4.2.</span> <span class="toc-text">预定字符集</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E7%BB%84-amp-%E6%88%96-amp-%E8%BD%AC%E4%B9%89"><span class="toc-number">4.3.</span> <span class="toc-text">分组&amp;或&amp;转义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%B9%E7%95%8C%E5%8C%B9%E9%85%8D"><span class="toc-number">4.4.</span> <span class="toc-text">边界匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A0%87%E5%BF%97%E4%BD%8D-flags"><span class="toc-number">4.5.</span> <span class="toc-text">标志位 flags</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#re%E6%A8%A1%E5%9D%97%E4%B8%AD%E7%9A%84%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.</span> <span class="toc-text">re模块中的函数</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#re-match%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.1.</span> <span class="toc-text">re.match函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-search%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.2.</span> <span class="toc-text">re.search函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-split%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.3.</span> <span class="toc-text">re.split函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-findall%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.4.</span> <span class="toc-text">re.findall函数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#re-sub%E5%87%BD%E6%95%B0"><span class="toc-number">4.6.5.</span> <span class="toc-text">re.sub函数</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%96%E5%9B%9E%E5%8C%B9%E9%85%8D%E7%9A%84%E6%95%B0%E6%8D%AE"><span class="toc-number">4.7.</span> <span class="toc-text">取回匹配的数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#r"><span class="toc-number">4.8.</span> <span class="toc-text">r</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F%E4%B8%8E%E9%9D%9E%E8%B4%AA%E5%A9%AA%E6%A8%A1%E5%BC%8F"><span class="toc-number">4.9.</span> <span class="toc-text">贪婪模式与非贪婪模式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AD%E6%8B%AC%E5%8F%B7%E5%92%8C%E6%8B%AC%E5%8F%B7"><span class="toc-number">4.10.</span> <span class="toc-text">中括号和括号</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BE%8B%E5%AD%90"><span class="toc-number">4.11.</span> <span class="toc-text">例子</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B0%8F%E6%A1%88%E4%BE%8B"><span class="toc-number">4.12.</span> <span class="toc-text">小案例</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#csv%E6%96%87%E4%BB%B6%E5%A4%84%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">csv文件处理</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%BB%E5%8F%96csv%E6%96%87%E4%BB%B6"><span class="toc-number">5.0.1.</span> <span class="toc-text">读取csv文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE"><span class="toc-number">5.0.2.</span> <span class="toc-text">获取数据</span></a></li></ol></li></ol></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&text=Python学习--Python爬虫基础"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&is_video=false&description=Python学习--Python爬虫基础"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Python学习--Python爬虫基础&body=Check out this article: http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&title=Python学习--Python爬虫基础"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&name=Python学习--Python爬虫基础&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://s1eady.top/2018/12/07/Python%E7%88%AC%E8%99%AB/&t=Python学习--Python爬虫基础"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> 菜单</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> 目录</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> 分享</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> 返回顶部</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy;
    
    
    2016-2020
    John Doe
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">首页</a></li>
         
          <li><a href="/about/">关于</a></li>
         
          <li><a href="/archives/">归档</a></li>
         
          <li><a href="/projects_url">项目</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"复制到粘贴板!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight table").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      text: function(trigger) {
        return Array.from(trigger.nextElementSibling.querySelectorAll('.code')).reduce((str,it)=>str+it.innerText+'\n','')
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "复制成功!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Umami Analytics -->

<!-- Disqus Comments -->


</body>
</html>
